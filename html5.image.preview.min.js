function previewImage(e,t,n){var r=e.files;var i=e.parentNode;var s=i.getElementsByClassName("imagePreview")[0];var o=["JPG","JPEG","GIF","PNG","SVG","WEBP"];s.innerHTML="Loading...";var u=r[0];var a=/image.*/;var f=detectDevice();if(!f.android){if(!u.type.match(a)){var l=document.createElement("p");s.innerHTML="";l.innerHTML="This is not valid Image file";s.appendChild(l);return false}}var c="";var h=new FileReader;h.onload=function(e){return function(e){s.innerHTML="";var r=e.target.result.split(";");r=r[0].split("/");r=r[1].split("+");r=r[0].toUpperCase();if(f.android){r=u.name.split(".");r=r[r.length-1].split("+");r=r[0].toUpperCase()}var i=document.createElement("p");i.innerHTML="<br />This is a <b>"+r+"</b> image, size of <b>"+(e.total/1024).toFixed(2)+"</b> KB.";if(o.indexOf(r)>=0&&e.total<n*1024*1024){for(var a in t){var l=document.createElement("img");var c=e.target.result;l.src=c;l.width=t[a];l.title="Image preview "+t[a]+"px";s.appendChild(l)}i.innerHTML+='<br /><span style="color:green;">Picture seems to be fine for upload.</span>'}else{i.innerHTML+='<br /><span style="color:red;">Which is wrong format / size! Accepted formats: '+o.join(", ")+". Size limit is: "+n+"MB</span>"}s.appendChild(i)}}(c);h.readAsDataURL(u)}function detectDevice(){var e=navigator.userAgent;var t={apple:e.match(/(iPhone|iPod|iPad)/),blackberry:e.match(/BlackBerry/),android:e.match(/Android/),microsoft:e.match(/Windows Phone/),zune:e.match(/ZuneWP7/)};return t}
